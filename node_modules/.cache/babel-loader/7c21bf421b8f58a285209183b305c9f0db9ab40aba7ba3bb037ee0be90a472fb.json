{"ast":null,"code":"import { ref, reactive, getCurrentInstance, toRefs } from \"vue\";\nimport { ElMessageBox, ElMessage } from 'element-plus';\n\n// const { proxy } = getCurrentInstance();\n\nexport default {\n  __name: 'collpay',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const reimbursement_infoList = ref([]);\n    const open = ref(false);\n    const loading = ref(true);\n    const showSearch = ref(true);\n    const ids = ref([]);\n    const single = ref(true);\n    const multiple = ref(true);\n    const total = ref(0);\n    const title = ref(\"\");\n    const data = reactive({\n      form: {},\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        applicant: null,\n        groupNum: null,\n        cash: null,\n        applyTime: null,\n        operateTime: null,\n        type: null,\n        entrustment: null\n      },\n      rules: {\n        id: [{\n          required: true,\n          message: \"ID不能为空\",\n          trigger: \"blur\"\n        }],\n        applicant: [{\n          required: true,\n          message: \"申请人不能为空\",\n          trigger: \"blur\"\n        }],\n        region: [{\n          required: true,\n          message: \"地区不能为空\",\n          trigger: \"blur\"\n        }],\n        type: [{\n          required: true,\n          message: \"报销费用类型不能为空\",\n          trigger: \"change\"\n        }],\n        cash: [{\n          required: true,\n          message: \"报销金额不能为空\",\n          trigger: \"blur\"\n        }],\n        applyTime: [{\n          required: true,\n          message: \"报销时间不能为空\",\n          trigger: \"blur\"\n        }],\n        bankName: [{\n          required: true,\n          message: \"报销开户行不能为空\",\n          trigger: \"blur\"\n        }],\n        bankId: [{\n          required: true,\n          message: \"报销账号不能为空\",\n          trigger: \"blur\"\n        }]\n      }\n    });\n    const {\n      queryParams,\n      form,\n      rules\n    } = toRefs(data);\n    function fetchData() {\n      // 模拟从后端获取数据\n      const datas = [{\n        id: '10001',\n        groupNum: \"20250101-ABC\",\n        type: \"实收款\",\n        info: \"1人数 × 6499单价\",\n        cash: \"6499\",\n        bank: \"建行A\",\n        entrustment: \"委托社A\",\n        applyTime: \"2024-12-21\",\n        operateTime: \"2024-12-21\",\n        remark: \"团款\",\n        applicant: \"小张\"\n      }, {\n        id: '10002',\n        groupNum: \"20250101-XYZ123\",\n        type: \"实收款\",\n        info: \"1人数 × 5899单价\",\n        cash: \"5899\",\n        bank: \"建行B\",\n        entrustment: \"委托社B\",\n        applyTime: \"2025-01-12\",\n        operateTime: \"2025-01-12\",\n        remark: \"尾款+小费\",\n        applicant: \"小王\"\n      }];\n\n      // 更新reimbursement_infoList\n      reimbursement_infoList.value = datas;\n      console.log(datas);\n    }\n    fetchData();\n\n    /** 查询报销信息列表 */\n    function getList() {\n      loading.value = true;\n      const {\n        applicant,\n        groupNum,\n        cash,\n        applyTime,\n        type,\n        operateTime,\n        entrustment\n      } = queryParams.value;\n\n      // 根据 queryParams.value 的条件筛选 reimbursement_infoList\n      const filteredList = reimbursement_infoList.value.filter(item => {\n        return (!applicant || item.applicant === applicant) && (!operateTime || item.operateTime === operateTime) && (!groupNum || item.groupNum === groupNum) && (!type || item.type === type) && (!cash || item.cash === cash) && (!entrustment || item.entrustment === entrustment) && (!applyTime || item.applyTime === applyTime);\n      });\n\n      // 更新筛选后的列表和总条数\n      reimbursement_infoList.value = filteredList;\n      total.value = filteredList.length;\n      loading.value = false;\n    }\n\n    // 取消按钮\n    function cancel() {\n      open.value = false;\n      reset();\n    }\n\n    // 表单重置\n    function reset() {\n      form.value = {\n        id: null\n      };\n      proxy.resetForm(\"reimbursement_infoRef\");\n    }\n\n    /** 搜索按钮操作 */\n    function handleQuery() {\n      queryParams.applicant = form.applicant;\n      queryParams.operateTime = form.operateTime;\n      queryParams.cash = form.cash;\n      queryParams.applyTime = form.applyTime;\n      queryParams.type = form.type;\n      queryParams.entrustment = form.entrustment;\n      queryParams.groupNum = form.groupNum;\n      getList();\n    }\n\n    /** 重置按钮操作 */\n    function resetQuery() {\n      // 重置查询参数为初始值\n      queryParams.value = {\n        applicant: '',\n        type: '',\n        cash: '',\n        groupNum: '',\n        entrustment: '',\n        operateTime: '',\n        applyTime: ''\n      };\n\n      // 调用 getList 方法重新获取数据\n      getList();\n    }\n\n    // 多选框选中数据\n    function handleSelectionChange(selection) {\n      ids.value = selection.map(item => item.id);\n      single.value = selection.length != 1;\n      multiple.value = !selection.length;\n    }\n\n    /** 新增按钮操作 */\n    function handleAdd() {\n      reset();\n      open.value = true;\n      title.value = \"添加报销信息\";\n    }\n\n    /** 修改按钮操作 */\n    function handleUpdate(row) {\n      reset();\n      const _id = row.id || ids.value;\n      getReimbursement_info(_id).then(response => {\n        form.value = response.data;\n        open.value = true;\n        title.value = \"修改报销信息\";\n      });\n    }\n\n    /** 提交按钮 */\n    function submitForm() {\n      proxy.$refs[\"reimbursement_infoRef\"].validate(valid => {\n        if (valid) {\n          if (form.value.id != null) {\n            updateReimbursement_info(form.value).then(response => {\n              proxy.$modal.msgSuccess(\"修改成功\");\n              open.value = false;\n              getList();\n            });\n          } else {\n            addReimbursement_info(form.value).then(response => {\n              proxy.$modal.msgSuccess(\"新增成功\");\n              open.value = false;\n              getList();\n            });\n          }\n        }\n      });\n    }\n\n    /** 删除按钮操作 */\n    function handleDelete(row) {\n      ElMessageBox.confirm('此操作驳回该申请, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 找到并删除对应的行\n        const index = reimbursement_infoList.value.findIndex(item => item === row);\n        if (index !== -1) {\n          reimbursement_infoList.value.splice(index, 1);\n        }\n        ElMessage({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(() => {\n        ElMessage({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n    ;\n    function handleOK(row) {\n      ElMessageBox.confirm('此操作驳回该申请, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 找到并删除对应的行\n        const index = reimbursement_infoList.value.findIndex(item => item === row);\n        if (index !== -1) {\n          reimbursement_infoList.value.splice(index, 1);\n        }\n        ElMessage({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(() => {\n        ElMessage({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n    ;\n\n    /** 导出按钮操作 */\n    function handleExport() {\n      ElMessage.warning('暂未连接数据库，Excel表导出功能暂不能使用');\n    }\n    getList();\n    const __returned__ = {\n      reimbursement_infoList,\n      open,\n      loading,\n      showSearch,\n      ids,\n      single,\n      multiple,\n      total,\n      title,\n      data,\n      queryParams,\n      form,\n      rules,\n      fetchData,\n      getList,\n      cancel,\n      reset,\n      handleQuery,\n      resetQuery,\n      handleSelectionChange,\n      handleAdd,\n      handleUpdate,\n      submitForm,\n      handleDelete,\n      handleOK,\n      handleExport,\n      ref,\n      reactive,\n      getCurrentInstance,\n      toRefs,\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","getCurrentInstance","toRefs","ElMessageBox","ElMessage","reimbursement_infoList","open","loading","showSearch","ids","single","multiple","total","title","data","form","queryParams","pageNum","pageSize","applicant","groupNum","cash","applyTime","operateTime","type","entrustment","rules","id","required","message","trigger","region","bankName","bankId","fetchData","datas","info","bank","remark","value","console","log","getList","filteredList","filter","item","length","cancel","reset","proxy","resetForm","handleQuery","resetQuery","handleSelectionChange","selection","map","handleAdd","handleUpdate","row","_id","getReimbursement_info","then","response","submitForm","$refs","validate","valid","updateReimbursement_info","$modal","msgSuccess","addReimbursement_info","handleDelete","confirm","confirmButtonText","cancelButtonText","index","findIndex","splice","catch","handleOK","handleExport","warning"],"sources":["D:/SoftwareForProject/Data/erp20250111/erp_/src/views/collpay/collpay.vue"],"sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n      <el-form :model=\"queryParams\" ref=\"queryRef\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n        <el-form-item label=\"团号\" prop=\"groupNum\">\r\n          <el-input\r\n            v-model=\"queryParams.groupNum\"\r\n            placeholder=\"请输入团号\"\r\n            clearable\r\n            @keyup.enter=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"收付款类别\" prop=\"bank\">\r\n          <el-select\r\n            v-model=\"queryParams.bank\"\r\n            placeholder=\"请选择收付款类别\"\r\n            clearable\r\n            style=\"width: 150px;\"\r\n            @keyup.enter=\"handleQuery\"\r\n          >\r\n            <el-option label=\"建行A\" value=\"建行A\"></el-option>\r\n            <el-option label=\"建行B\" value=\"建行B\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"委托社\" prop=\"entrustment\">\r\n          <el-select\r\n            v-model=\"queryParams.entrustment\"\r\n            placeholder=\"请选择委托社\"\r\n            clearable\r\n            style=\"width: 150px;\"\r\n            @keyup.enter=\"handleQuery\"\r\n          >\r\n            <el-option label=\"委托社A\" value=\"委托社A\"></el-option>\r\n            <el-option label=\"委托社B\" value=\"委托社B\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"总金额\" prop=\"cash\">\r\n          <el-input\r\n            v-model=\"queryParams.cash\"\r\n            placeholder=\"请输入总金额\"\r\n            clearable\r\n            @keyup.enter=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"申请时间\" prop=\"applyTime\">\r\n          <el-date-picker clearable\r\n            v-model=\"queryParams.applyTime\"\r\n            type=\"date\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            placeholder=\"请选择申请时间\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"申请人\" prop=\"applicant\">\r\n          <el-input\r\n            v-model=\"queryParams.applicant\"\r\n            placeholder=\"请输入申请人\"\r\n            clearable\r\n            @keyup.enter=\"handleQuery\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n          <el-button icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n  \r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n        <!-- <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"primary\"\r\n            plain\r\n            icon=\"Plus\"\r\n            @click=\"handleAdd\"\r\n          >新增</el-button>\r\n        </el-col> -->\r\n        <!-- <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"success\"\r\n            plain\r\n            icon=\"Edit\"\r\n            :disabled=\"single\"\r\n            @click=\"handleUpdate\"\r\n          >修改</el-button>\r\n        </el-col> -->\r\n        <!-- <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"danger\"\r\n            plain\r\n            icon=\"Delete\"\r\n            :disabled=\"multiple\"\r\n            @click=\"handleDelete\"\r\n          >删除</el-button>\r\n        </el-col> -->\r\n        <el-col :span=\"1.5\">\r\n          <el-button\r\n            type=\"warning\"\r\n            plain\r\n            icon=\"Download\"\r\n            @click=\"handleExport\"\r\n          >导出*</el-button>\r\n        </el-col>\r\n        <right-toolbar v-model:showSearch=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n      </el-row>\r\n  \r\n      <el-table :data=\"reimbursement_infoList\">\r\n        <el-table-column label=\"序号\" type=\"index\" width=\"50\" align=\"center\" />\r\n        <el-table-column align=\"center\" prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"groupNum\" label=\"团号\" width=\"80\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"type\" label=\"收付款类别\" width=\"80\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"info\" label=\"备注人数 X 金额\" width=\"250\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"cash\" label=\"总金额\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"bank\" label=\"收付款方式\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"entrustment\" label=\"委托社\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"remark\" label=\"应收付项目\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"applyTime\" label=\"申请时间\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"operateTime\" label=\"收付款时间\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"applicant\" label=\"申请人\"></el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\" width=\"140px\">\r\n        <template #default=\"{ row }\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"handleOK(row)\"\r\n          >确认*</el-button>\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"text\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"handleDelete(row)\"\r\n          >驳回*</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      </el-table>\r\n      <!--@click=\"handleUpdate(row)\" @click=\"handleDelete01(row)\" -->\r\n      \r\n      <el-pagination\r\n        v-show=\"total>0\"\r\n        :total=\"total\"\r\n        v-model:page=\"queryParams.pageNum\"\r\n        v-model:limit=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n  \r\n      <!-- 添加或修改报销信息对话框 -->\r\n      <!-- <el-dialog :title=\"title\" v-model=\"open\" width=\"500px\" append-to-body>\r\n        <el-form ref=\"reimbursement_infoRef\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n          <el-form-item label=\"申请人\" prop=\"name\">\r\n            <el-input v-model=\"form.name\" placeholder=\"请输入申请人\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"地区\" prop=\"region\">\r\n            <el-input v-model=\"form.region\" placeholder=\"请输入地区\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"报销金额\" prop=\"cash\">\r\n            <el-input v-model=\"form.cash\" placeholder=\"请输入报销金额\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"备注\" prop=\"info\">\r\n            <el-input v-model=\"form.info\" placeholder=\"请输入备注\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"报销时间\" prop=\"applyTime\">\r\n            <el-date-picker clearable\r\n              v-model=\"form.applyTime\"\r\n              type=\"date\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              placeholder=\"请选择报销时间\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"审核评价\" prop=\"comment\">\r\n            <el-input v-model=\"form.comment\" placeholder=\"请输入审核评价\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"摊销开始时间\" prop=\"amoStartTime\">\r\n            <el-date-picker clearable\r\n              v-model=\"form.amoStartTime\"\r\n              type=\"date\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              placeholder=\"请选择摊销开始时间\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"摊销结束时间\" prop=\"amoEndTime\">\r\n            <el-date-picker clearable\r\n              v-model=\"form.amoEndTime\"\r\n              type=\"date\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              placeholder=\"请选择摊销结束时间\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"报销开户行\" prop=\"bankName\">\r\n            <el-input v-model=\"form.bankName\" placeholder=\"请输入报销开户行\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"报销账号\" prop=\"bankId\">\r\n            <el-input v-model=\"form.bankId\" placeholder=\"请输入报销账号\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"票据文件*\" prop=\"receiptInfo\">\r\n            <file-upload v-model=\"form.receiptInfo\"/>\r\n          </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n          <div class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n            <el-button @click=\"cancel\">取 消</el-button>\r\n          </div>\r\n        </template>\r\n      </el-dialog> -->\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup >\r\n  import { ref, reactive, getCurrentInstance, toRefs } from \"vue\";\r\n  import { ElMessageBox, ElMessage } from 'element-plus';\r\n  \r\n  // const { proxy } = getCurrentInstance();\r\n  \r\n  const reimbursement_infoList = ref([]);\r\n  const open = ref(false);\r\n  const loading = ref(true);\r\n  const showSearch = ref(true);\r\n  const ids = ref([]);\r\n  const single = ref(true);\r\n  const multiple = ref(true);\r\n  const total = ref(0);\r\n  const title = ref(\"\");\r\n  \r\n  const data = reactive({\r\n    form: {},\r\n    queryParams: {\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      applicant: null,\r\n      groupNum: null,\r\n      cash: null,\r\n      applyTime: null,\r\n      operateTime: null,\r\n      type: null,\r\n      entrustment: null,\r\n    },\r\n    rules: {\r\n      id: [\r\n        { required: true, message: \"ID不能为空\", trigger: \"blur\" }\r\n      ],\r\n      applicant: [\r\n        { required: true, message: \"申请人不能为空\", trigger: \"blur\" }\r\n      ],\r\n      region: [\r\n        { required: true, message: \"地区不能为空\", trigger: \"blur\" }\r\n      ],\r\n      type: [\r\n        { required: true, message: \"报销费用类型不能为空\", trigger: \"change\" }\r\n      ],\r\n      cash: [\r\n        { required: true, message: \"报销金额不能为空\", trigger: \"blur\" }\r\n      ],\r\n      applyTime: [\r\n        { required: true, message: \"报销时间不能为空\", trigger: \"blur\" }\r\n      ],\r\n      bankName: [\r\n        { required: true, message: \"报销开户行不能为空\", trigger: \"blur\" }\r\n      ],\r\n      bankId: [\r\n        { required: true, message: \"报销账号不能为空\", trigger: \"blur\" }\r\n      ],\r\n    }\r\n  });\r\n  \r\n  const { queryParams, form, rules } = toRefs(data);\r\n  \r\n  function fetchData() {\r\n    // 模拟从后端获取数据\r\n    const datas = [\r\n      { \r\n        id: '10001', groupNum: \"20250101-ABC\", type: \"实收款\", info: \"1人数 × 6499单价\", \r\n        cash: \"6499\", bank: \"建行A\", entrustment: \"委托社A\", applyTime: \"2024-12-21\", \r\n        operateTime: \"2024-12-21\", remark: \"团款\", applicant: \"小张\"\r\n      },\r\n      { \r\n        id: '10002', groupNum: \"20250101-XYZ123\", type: \"实收款\", info: \"1人数 × 5899单价\", \r\n        cash: \"5899\", bank: \"建行B\", entrustment: \"委托社B\", applyTime: \"2025-01-12\", \r\n        operateTime: \"2025-01-12\", remark: \"尾款+小费\", applicant: \"小王\" \r\n      }\r\n    ];\r\n  \r\n    // 更新reimbursement_infoList\r\n    reimbursement_infoList.value = datas;\r\n    console.log(datas);\r\n  }\r\n  \r\n  fetchData();\r\n  \r\n  /** 查询报销信息列表 */\r\n  function getList() {\r\n    loading.value = true;\r\n    const { applicant, groupNum, cash, applyTime, type, operateTime, entrustment } = queryParams.value;\r\n    \r\n    // 根据 queryParams.value 的条件筛选 reimbursement_infoList\r\n    const filteredList = reimbursement_infoList.value.filter(item => {\r\n      return (\r\n        (!applicant || item.applicant === applicant) &&\r\n        (!operateTime || item.operateTime === operateTime) &&\r\n        (!groupNum || item.groupNum === groupNum) &&\r\n        (!type || item.type === type) &&\r\n        (!cash || item.cash === cash) &&\r\n        (!entrustment || item.entrustment === entrustment) &&\r\n        (!applyTime || item.applyTime === applyTime)\r\n      );\r\n    });\r\n    \r\n    // 更新筛选后的列表和总条数\r\n    reimbursement_infoList.value = filteredList;\r\n    total.value = filteredList.length;\r\n    \r\n    loading.value = false;\r\n  }\r\n  \r\n  // 取消按钮\r\n  function cancel() {\r\n    open.value = false;\r\n    reset();\r\n  }\r\n  \r\n  // 表单重置\r\n  function reset() {\r\n    form.value = {\r\n      id: null,\r\n      \r\n    };\r\n    proxy.resetForm(\"reimbursement_infoRef\");\r\n  }\r\n  \r\n  /** 搜索按钮操作 */\r\n  function handleQuery() {\r\n    queryParams.applicant = form.applicant;\r\n    queryParams.operateTime = form.operateTime;\r\n    queryParams.cash = form.cash;\r\n    queryParams.applyTime = form.applyTime;\r\n    queryParams.type = form.type;\r\n    queryParams.entrustment = form.entrustment;\r\n    queryParams.groupNum = form.groupNum;\r\n    getList();\r\n  }\r\n  \r\n  /** 重置按钮操作 */\r\n  function resetQuery() {\r\n    // 重置查询参数为初始值\r\n    queryParams.value = {\r\n      applicant: '',\r\n      type: '',\r\n      cash: '',\r\n      groupNum: '',\r\n      entrustment: '',\r\n      operateTime: '',\r\n      applyTime: ''\r\n    };\r\n    \r\n    // 调用 getList 方法重新获取数据\r\n    getList();\r\n  }\r\n  \r\n  // 多选框选中数据\r\n  function handleSelectionChange(selection) {\r\n    ids.value = selection.map(item => item.id);\r\n    single.value = selection.length != 1;\r\n    multiple.value = !selection.length;\r\n  }\r\n  \r\n  /** 新增按钮操作 */\r\n  function handleAdd() {\r\n    reset();\r\n    open.value = true;\r\n    title.value = \"添加报销信息\";\r\n  }\r\n  \r\n  /** 修改按钮操作 */\r\n  function handleUpdate(row) {\r\n    reset();\r\n    const _id = row.id || ids.value\r\n    getReimbursement_info(_id).then(response => {\r\n      form.value = response.data;\r\n      open.value = true;\r\n      title.value = \"修改报销信息\";\r\n    });\r\n  }\r\n  \r\n  /** 提交按钮 */\r\n  function submitForm() {\r\n    proxy.$refs[\"reimbursement_infoRef\"].validate(valid => {\r\n      if (valid) {\r\n        if (form.value.id != null) {\r\n          updateReimbursement_info(form.value).then(response => {\r\n            proxy.$modal.msgSuccess(\"修改成功\");\r\n            open.value = false;\r\n            getList();\r\n          });\r\n        } else {\r\n          addReimbursement_info(form.value).then(response => {\r\n            proxy.$modal.msgSuccess(\"新增成功\");\r\n            open.value = false;\r\n            getList();\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  \r\n  /** 删除按钮操作 */\r\n  function handleDelete(row) {\r\n      ElMessageBox.confirm('此操作驳回该申请, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(() => {\r\n          // 找到并删除对应的行\r\n          const index = reimbursement_infoList.value.findIndex(item => item === row);\r\n          if (index !== -1) {\r\n            reimbursement_infoList.value.splice(index, 1);\r\n          }\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          });\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: 'info',\r\n            message: '已取消删除',\r\n          });\r\n        });\r\n    };\r\n\r\n    function handleOK(row) {\r\n      ElMessageBox.confirm('此操作驳回该申请, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(() => {\r\n          // 找到并删除对应的行\r\n          const index = reimbursement_infoList.value.findIndex(item => item === row);\r\n          if (index !== -1) {\r\n            reimbursement_infoList.value.splice(index, 1);\r\n          }\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          });\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: 'info',\r\n            message: '已取消删除',\r\n          });\r\n        });\r\n    };\r\n  \r\n  /** 导出按钮操作 */\r\n  function handleExport() {\r\n    ElMessage.warning('暂未连接数据库，Excel表导出功能暂不能使用');\r\n  }\r\n  \r\n  getList();\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* .container-part {\r\n    height: 100%;\r\n  \r\n    height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .form-part {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    height: 40px;\r\n    padding: 8px;\r\n    margin: 4px 0;\r\n    border-radius: 6px;\r\n    background-color: #ffffff;\r\n    box-shadow: 3px -3px 4px -3px rgb(157, 154, 154);\r\n    倒角\r\n  \r\n  }\r\n  \r\n  .table-part {\r\n    flex: 1;\r\n    box-shadow: 3px -3px 4px -3px rgb(157, 155, 155);\r\n    padding: 8px;\r\n    margin: 4px 0;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .page-part {\r\n    height: 10px;\r\n  \r\n    padding: 10px;\r\n    border-radius: 6px;\r\n    background-color: #ffffff;\r\n  } */\r\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}